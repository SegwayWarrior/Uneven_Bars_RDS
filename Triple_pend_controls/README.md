# Triple Pendulum Controls
Matlab code for simulating the triple pendulum Uneven Bars robot.
Includes computation and visualization of reaction forces when robot is on each bar.

Robot Design Studio 2020
Developed by Sarah Ziselman and Jiabin Liu

## Overview
Dynamics-related functions are automatically generated by running `derive_equations_uneven.m`.
`derive_equations_uneven.m` uses symbolic computation to generate the state-space dynamics of the jumping robot, which are then exported as MATLAB functions (e.g., `autogen_constraints.m` and `autogen_mass_matrix.m`).
Matrices like Minv, f_ss, g_ss are solved numerically in `main_uneven.m` to decrease run time.
Application entry point is `main_uneven.m`.
That means you have to run `derive_equations_uneven.m` before you run `main_uneven.m` for the first time.

### Autogenerated functions and wrappers
As in the cart-pendulum example, extensive use is made of autogenerated functions and wrapper functions.

### MATLAB structs and parsers
Physical parameters (mass, length, etc) are grouped into a struct called `params`, which is generated by calling `init_params.m`.
This struct gets passed around throughout the simulation, and saves you from having to worry about the order in which you supply input arguments.

Another way to avoid input argument order-dependency (a trademark of brittle code) is to use Name-Value pairs, which you have probably experienced if you've used MATLAB before.
Name-Value pairs rely on an "input parser"; check out `plot_robot_uneven.m` and `animate_robot_uneven.m` to see how this works.

### Nested Functions
`robot_events.m` determines when an event (pumping, bar1, flight, bar2) occurs.
`ode45` calls `robot_dynamics.m` and `robot_events.m` that are placed inside of (i.e., nested within) `main_uneven.m`.
This allows the three functions to share variables (including `params` and `F`) without explicit passing.  
This is helpful since the constraint forces `F` are computed within `robot_dynamics.m` but cannot be easily passed back through `ode45`.

### Status
The triple pendulum free falls from an initial position, releases from bar 1, and catches bar 2.